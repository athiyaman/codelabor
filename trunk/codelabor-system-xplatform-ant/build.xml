<?xml version="1.0" encoding="UTF-8"?>
<project name="xml2bin" default="compile" basedir=".">
	<echo message="${ant.home}" />

	<taskdef name="generateResources"
		classname="org.codelabor.system.xplatform.ant.GenerateResources"
		classpath="target/classes" />

	<property file="xml2bin.properties" />

	<target name="generate-resources">
		<generateResources iniFile="${ini.file}" destDir="${target.dir}"
			mkDir="${mk.dir.flag}" verbose="${verbose.flag}">
			<fileset dir="${source.dir}">
				<include name="**/*.xfdl" />
				<include name="**/*.xml" />
				<exclude name="**/XPLATFORM_Client_License.xml" />
			</fileset>
		</generateResources>
	</target>

	<target name="compile" depends="generate-resources">
		<exec executable="${xml2bin.execuable}" failonerror="true">
			<arg value="${ini.file}"/>
			<arg value="${log.file}"/>
		</exec>
	</target>

</project>
