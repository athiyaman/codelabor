<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="common.gcm" >


	<select id="selectTargetUserRegistrationIdList" parameterType="gcmSendDto" resultType="gcmSendDto">
		SELECT /* selectTargetUserRegistrationIdList */ USER_ID, GCM_REG_ID 
		FROM TN_MBER_TRMNL 
		WHERE
		    SCHUL_CD = #{schulCd}
			AND USER_ID IN ( ${userTarget} )
			AND DEL_YN = '0'
	</select>


	<insert id="insertGcmMessage" parameterType="gcmSendDto">
		INSERT /* insertGcmMessage */
		INTO SDK_MMS_SEND
			(
			MSG_ID ,
			USER_ID	,
			SCHEDULE_TYPE ,
			SUBJECT ,
			MMS_MSG ,
			CONTENT_COUNT ,
			CONTENT_DATA ,
			NOW_DATE ,
			SEND_DATE ,
			CALLBACK ,
			DEST_COUNT ,
			DEST_INFO ,
			RESERVED1 ,
			RESERVED2 ,
			RESERVED3 ,
			RESERVED5
		)
		VALUES
		(
			#{msgId} ,
			#{userId} ,
			#{scheduleType} ,
			#{subject} ,
			#{smsMsg} ,
			0 ,
			'' ,
			#{nowDate} ,
			#{sendDate} ,
			#{callback} ,
			#{destCount} ,
			#{destInfo} ,
			#{reserved1} ,
			#{reserved2} ,
			#{reserved3} ,
			#{reserved5}
		)
	</insert>

</mapper>