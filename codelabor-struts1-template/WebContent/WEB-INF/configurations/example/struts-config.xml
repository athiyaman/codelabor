<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts-config PUBLIC
          "-//Apache Software Foundation//DTD Struts Configuration 1.3//EN"
          "http://struts.apache.org/dtds/struts-config_1_3.dtd">
<struts-config>
	<form-beans>
		<form-bean name="loginForm" type="org.apache.struts.action.DynaActionForm">
			<form-property name="userId" type="java.lang.String" />
			<form-property name="password" type="java.lang.String" />
		</form-bean>
		<form-bean name="uploadForm" type="org.codelabor.system.forms.UploadForm"/>	
		<form-bean name="tokenForm" type="org.apache.struts.action.DynaActionForm">
			<form-property name="field1" type="java.lang.String" />
			<form-property name="field2" type="java.lang.String" />
		</form-bean>
		<form-bean name="crudForm" type="org.apache.struts.action.DynaActionForm">
			<form-property name="id" type="java.lang.String[]" />
			<form-property name="field1" type="java.lang.String"
				initial="" />
			<form-property name="field2" type="java.lang.String"
				initial="" />
		</form-bean>
	</form-beans>
	<action-mappings>
		<action path="/layoutExample" forward="defaultLayout" />
		<action path="/login" name="loginForm"
			type="org.codelabor.example.struts.actions.LoginAction" scope="request"
			input="/pages/example/login/login.jsp" parameter="method">
			<forward name="processLogin" path="/pages/example/login/welcome.jsp" />
			<forward name="processLogout" path="/pages/example/login/goodbye.jsp" />
			<forward name="prepareLogin" path="/pages/example/login/login.jsp" />
		</action>	
		<action path="/crud"
			type="org.springframework.web.struts.DelegatingActionProxy" scope="request"
			parameter="method" name="crudForm" validate="false">
			<forward name="prepareCreate" path="/pages/example/crud/createForm.jsp" />
			<forward name="processCreate" path="/example/crud.do?method=list" />
			<forward name="read" path="/pages/example/crud/read.jsp" />
			<forward name="list" path="/pages/example/crud/list.jsp" />
			<forward name="prepareUpdate" path="/pages/example/crud/updateForm.jsp" />
			<forward name="processUpdate" path="/example/crud.do?method=list" />
			<forward name="delete" path="/example/crud.do?method=list" />
		</action>
		<action path="/crud2"
			type="org.codelabor.example.struts.actions.Crud2Action" scope="request"
			parameter="method">
			<forward name="prepareCreate" path="/pages/example/crud2/createForm.jsp" />
			<forward name="processCreate" path="/example/crud2.do?method=list" />
			<forward name="read" path="/pages/example/crud2/read.jsp" />
			<forward name="list" path="/pages/example/crud2/list.jsp" />
			<forward name="prepareUpdate" path="/pages/example/crud2/updateForm.jsp" />
			<forward name="processUpdate" path="/example/crud2.do?method=list" />
			<forward name="delete" path="/example/crud2.do?method=list" />
		</action>		
		<action path="/prepareSynchronizedToken"
			type="org.codelabor.example.struts.actions.SynchronizedTokenPrepareAction"
			scope="request">
			<forward name="success" path="/pages/example/synchronized-token/form.jsp" />
		</action>
		<action path="/processSynchronizedToken" name="tokenForm"
			type="org.codelabor.example.struts.actions.SynchronizedTokenProcessAction"
			scope="request" input="/pages/example/synchronized-token/form.jsp"
			validate="false">
			<forward name="success" path="/pages/example/synchronized-token/result.jsp" />
		</action>
		<action path="/login" name="loginForm"
			type="org.codelabor.example.struts.actions.LoginAction" scope="request"
			input="/pages/example/login/login.jsp" parameter="method">
			<forward name="processLogin" path="/pages/example/login/welcome.jsp" />
			<forward name="processLogout" path="/pages/example/login/goodbye.jsp" />
			<forward name="prepareLogin" path="/pages/example/login/login.jsp" />
		</action>
		<action path="/uploadFile" name="uploadForm"
			type="org.springframework.web.struts.DelegatingActionProxy" scope="request"
			parameter="method">
			<forward name="list" path="/pages/example/file/list.jsp" />
			<forward name="read" path="/pages/example/file/read.jsp" />
			<forward name="upload" path="/example/uploadFile.do?method=list" />
			<forward name="delete" path="/example/uploadFile.do?method=list" />
		</action>
		<action path="/downloadFile"
			type="org.springframework.web.struts.DelegatingActionProxy" scope="request"/>
		<action path="/error"
			type="org.springframework.web.struts.DelegatingActionProxy" scope="request"
			parameter="method">
		</action>
	</action-mappings>
	<controller
		processorClass="org.springframework.web.struts.DelegatingTilesRequestProcessor"
		contentType="text/html;charset=UTF-8" locale="true" inputForward="true"
		nocache="false">
	</controller>
	<message-resources parameter="messages.MessageResources" />
	<message-resources parameter="messages.example.MessageResources"
		key="example" />	
	<plug-in className="org.apache.struts.tiles.TilesPlugin">
		<set-property property="definitions-config"
			value="/WEB-INF/configurations/example/tiles-defs.xml" />
		<set-property property="moduleAware" value="true" />
	</plug-in>	
	<plug-in className="org.apache.struts.validator.ValidatorPlugIn">
		<set-property property="pathnames"
			value="/org/apache/struts/validator/validator-rules.xml, /WEB-INF/configurations/example/validation.xml" />
		<set-property property="stopOnFirstError" value="false" />
	</plug-in>
	<plug-in className="org.springframework.web.struts.ContextLoaderPlugIn">
		<set-property property="contextConfigLocation"
			value="/WEB-INF/configurations/system/action-servlet.xml,
			/WEB-INF/configurations/example/action-servlet.xml" />
	</plug-in>	
</struts-config>